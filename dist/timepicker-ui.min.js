/**
 * jQueryUI timePicker v1.0.
 * Project at: https://github.com/KaminskyIlya/timePicker
 * Powered by: Ilya Kaminsky.
 */
(function(a){a.fn.timePicker=function(f){var b=a.extend({touchscreen:!!("ontouchstart" in window),compatible:false,minActiveDistance:20,hourArrowLenth:65,minuteArrowLength:81,defaultHour:0,defaultMin:0,PM:true,onOpened:function(){},onClosed:function(){}},f);var z=(!b.touchscreen)?'<div class="time-picker time-picker-body" style="display: none"><div class="switch-wrapper"><div class="switch-image">AM</div></div><div class="time-picker-arrow time-picker-hour"></div><div class="time-picker-arrow time-picker-minute"></div><div class="switch-wrapper"><div class="switch-button"></div></div></div>':'<div class="time-picker-touch time-picker-body" style="display: none"><div class="switch-wrapper"><div class="switch-image">AM</div></div><div class="time-picker-arrow time-picker-hour"></div><div class="time-picker-arrow time-picker-minute"></div><div class="switch-wrapper"><div class="switch-button"></div></div></div>';var k=a(z).appendTo("body").addClass(!!b.compatible?"compatible":"advanced");var s=2*b.minActiveDistance*b.minActiveDistance,B=b.hourArrowLenth,n=b.minuteArrowLength;var d=10;var j={w:k.width()/2,h:k.height()/2};var v=b.defaultHour,t=b.defaultHour,c=b.PM;var u;var e;var o;var A;var q;var l=false;var w=function(D,E,G){var C=D*Math.cos((E-90)/180*Math.PI);var F=D*Math.sin((E-90)/180*Math.PI);return(((C-G.x)*(C-G.x)+(F-G.y)*(F-G.y))<=2*d*d);};var h=function(D,G){var F,C,E;if(Math.abs(D)>Math.abs(G)){C=G/D;E=Math.atan(C)/Math.PI*180;F=(D>0)?E+90:E+270;}else{C=D/G;E=90-Math.atan(C)/Math.PI*180;F=(G>0)?E+90:E+270;if(F>=360){F-=360;}}return F;};var i=function(){var D=v,C=t;D=(c)?D%12+12:D%12;D=(D<10)?"0"+D:D;C=(C<10)?"0"+C:C;if(q.data().hasDatepicker){q.val(q.val().replace(/ T$| ?\d{2}:\d{2} ?|^T | T /," "+D+":"+C+" ").trim());var F=q.datepicker("option","altField");if(F){a(F).each(function(){this.value=this.value.replace(/ T$| ?\d{2}:\d{2} ?|^T | T /," "+D+":"+C+" ").trim();});}}else{q.val(D+":"+C);}var E=q.data();E.hours=v;E.minutes=t;E.pm_time=c;E.time=((v+c?12:0)*60+t)*60;};var g=function(){var R=parseInt(v%12*30+t/2),N=t*6,V=navigator.userAgent.toLowerCase(),I=(V.indexOf("msie")!=-1)?parseInt(V.split("msie")[1]):false;if(I!==false&&I<9){var T=R/180*Math.PI,O=N/180*Math.PI,M=Math.cos(T),K=Math.sin(T),H=Math.cos(O),F=Math.sin(O),E="M11 = "+M+", M12 = "+(-K)+", M21 = "+K+", M22 = "+M,U="M11 = "+H+", M12 = "+(-F)+", M21 = "+F+", M22 = "+H,W="progid:DXImageTransform.Microsoft.Matrix("+E+", sizingMethod = 'auto expand')",P="progid:DXImageTransform.Microsoft.Matrix("+U+", sizingMethod = 'auto expand')";G={filter:W,"-ms-filter":W};C={filter:P,"-ms-filter":P};var Q=[0,1,2,3,5,6,6,9,11,12,14,15,16,18,19,20,22,23,24,25,26,27,28,29,30,31,32,33,33,34,35,35,36,36,37,37,38,38,38,39,39,39,39,39,39,39];var D=Math.abs(R)%90;D=(D<45)?D:90-D;D=-Q[D];var S=Math.abs(N)%90;S=(S<45)?S:90-S;S=-Q[S];k.find(".time-picker-hour").css(G).css({left:D+"px",top:D+"px"});k.find(".time-picker-minute").css(C).css({left:S+"px",top:S+"px"});}else{var L="rotate("+R+"deg)",J="rotate("+N+"deg)",G={"-webkit-transform":L,"-moz-transform":L,"-ms-transform":L,"-o-transform":L,"-sand-transform":L,transform:L},C={"-webkit-transform":J,"-moz-transform":J,"-ms-transform":J,"-o-transform":J,"-sand-transform":J,transform:J};k.find(".time-picker-hour").css(G);k.find(".time-picker-minute").css(C);}var X=k.find(".switch-image").text((c)?"PM":"AM");if(c){X.addClass("pm_time");}else{X.removeClass("pm_time");}};var x=function(D,F,C,E){a("<div>").css({left:(C||0)+"px",top:"-10px",width:1,height:1,position:"absolute"}).animate({left:F},{duration:400,step:function(G,J){var I="rotate("+G+"deg)",H={"-webkit-transform":I,"-moz-transform":I,"-ms-transform":I,"-o-transform":I,"-sand-transform":I,transform:I};D.css(H);}});if(E){D.css({opa—Åity:0}).animate({opacity:1},800);}};var m=function(I){var H=I.match(/\d?\d:\d\d/g);var E=I.match(/\d?\d:\d/g);var D=I.match(/\d?\d:?/g);if(H||E||D){var J,G=v,C=t;if(H){J=H[0].match(/(\d?\d)/g);G=J[0]*1;C=J[1]*1;}else{if(E){var F=/(\d?\d):(\d)/g;J=F.exec(E[0]);G=J[1]*1;C=J[2]*1;C=(C<6)?C*10:C;}else{if(D){G=D[0]*1;C=0;}}}if((G>23)||(C>59)){return false;}c=(G>11);if(G>12){G-=12;}v=G;t=C;return true;}return false;};var r=function(){var J=a(document).scrollLeft(),I=a(document).scrollTop(),H=window.innerWidth+J,G=window.innerHeight+I;var E={left:J,top:I,right:H,bottom:G};var F=function(K,L){return !(L.right>K.right||L.left<K.left||L.top<K.top||L.bottom>K.bottom);};var C=function(K,L){return{left:K,top:L,right:K+k.outerWidth(),bottom:L+k.outerHeight()};};var D;D=C(q.offset().left,q.offset().top+q.outerHeight());if(F(E,D)){return D;}D=C(q.offset().left,q.offset().top-k.outerHeight());if(F(E,D)){return D;}D=C(q.offset().left+q.outerWidth(),E.top+parseInt((a(window).innerHeight()-k.outerHeight())/2));if(F(E,D)){return D;}D=C(q.offset().left+q.outerWidth()-k.outerWidth(),q.offset().top+q.outerHeight());if(F(E,D)){return D;}D=C(D.left,q.offset().top-k.outerHeight());if(F(E,D)){return D;}D=C(q.offset().left-k.outerWidth(),E.top+parseInt((a(window).innerHeight()-k.outerHeight())/2));if(F(E,D)){return D;}D=C(q.offset().left-k.outerWidth(),E.top+parseInt((a(window).innerHeight()-k.outerHeight())/2));if(F(E,D)){return D;}D.left=E.left+parseInt((a(window).innerWidth()-k.outerWidth()))/2;return D;};var p=function(){e=undefined;k.hide();l=false;b.onClosed();};var y=function(){e=undefined;k.show();l=true;b.onOpened();};k.on("mousedown touchstart",function(D){if(!b.touchscreen&&(D.which!=1||!l)){return;}if(D.target.className=="switch-button"){return;}o=k.offset();A={x:o.left+(j.w),y:o.top+(j.h)};if(b.touchscreen){var C=(D.type=="touchstart"&&D.originalEvent.touches)?{x:D.originalEvent.touches[0].pageX-A.x,y:D.originalEvent.touches[0].pageY-A.y}:{x:D.pageX-A.x,y:D.pageY-A.y};var E=h(C.x,C.y);e=(e)?e:"hour";if(e=="hour"){E=Math.round(E/30)*30;x(k.find(".time-picker-hour"),E+360,v*30+t/2);v=E/30;if(v>11){v-=12;}e="minute";}else{if(e=="minute"){E=Math.round(E/30)*30;x(k.find(".time-picker-minute"),E+360,t*6,false);x(k.find(".time-picker-hour"),v*30+E/12,v*30,false);t=E/6;e="close-button";}else{if(e=="close-button"){p();return;}}}i();D.stopPropagation();D.preventDefault();return;}u=true;var F={x:D.pageX-A.x,y:D.pageY-A.y};if(w(B,v*30,F)){e="hour";}else{if(w(n,t*6,F)){e="minute";}else{e="both";}}if(e=="both"){E=h(F.x,F.y);if(Math.abs((v*30+t/2)-E)<6){e="hour";}else{if(Math.abs(t*6-E)<6){e="minute";}}}D.stopPropagation();D.preventDefault();}).mousemove(function(E){if(!u){return;}var H={x:E.pageX-A.x,y:E.pageY-A.y};var G=H.x*H.x+H.y*H.y;if(G<s){return;}var F=h(H.x,H.y),D,C;if(e=="both"){D=parseInt(F/30);C=parseInt((F-D*30)*2);C=Math.floor(C/5)*5;v=D;t=C;}if(e=="minute"){D=v;C=parseInt(F/6);if(Math.abs(C-t)>50){if(C<10){D++;if(D>12){D-=12;}}else{if(C>50){D--;if(D<0){D+=12;}}}}v=D;t=C;}if(e=="hour"){v=parseInt(F/30);}i();g();E.stopPropagation();E.preventDefault();}).mouseup(function(C){u=false;C.stopPropagation();C.preventDefault();});k.find(".switch-button").click(function(C){c=!c;i();g();if(!(b.touchscreen||q.data().hasDatepicker)){q.trigger("focus");}C.stopPropagation();C.preventDefault();});a(document).mousedown(function(D){if(k.css("display")!="none"){var C=a(D.target);if(!(C.hasClass("time-picker")||C.hasClass("switch-button")||D.target==q[0])){p();}}});return this.each(function(){var C=a(this);if(C.data()["timePicked"]){return;}var D=C.hasClass("hasDatepicker");if(D){C.data().hasDatepicker=true;}if(b.touchscreen){C.attr("readonly","readonly");}if(m(C.val())){C.data().hours=v;C.data().minutes=t;C.data().pm_time=c;C.data().time=((v+c?12:0)*60+t)*60;}else{C.data().hours=b.defaultHour;C.data().minutes=b.defaultMin;C.data().pm_time=b.PM;C.data().time=((b.defaultHour+b.PM?12:0)*60+b.defaultMin)*60;}C.on("click focus time",function(F){if(l){return;}q=a(this);if(q.data().hasDatepicker){if(F.type!="time"){return;}v=q.data().hours||b.defaultHour;t=q.data().minutes||b.defaultMin;c=q.data().pm_time!=undefined?q.data().pm_time:b.PM;i();}else{m(q.val());}var G=r();k.css("left",G.left+"px");k.css("top",G.top+"px");if(b.touchscreen){x(a(".time-picker-hour"),v*30+t/2,0,true);x(a(".time-picker-minute"),t*6,0,true);var E=k.find(".switch-image").text((c)?"PM":"AM");if(c){E.addClass("pm_time");}else{E.removeClass("pm_time");}}else{g();}y();}).keyup(function(E){if(!l){return;}if(E.keyCode==13||E.keyCode==27){p();return;}if(m(a(this).val())){g();}}).keydown(function(E){if(!l){return;}if(E.keyCode==9&&E.target==q[0]){p();}}).blur(function(){if(!l&&m(q.val())){i();}});if(D){C.data().oldDatePickerHandler=C.datepicker("option","onClose");C.datepicker("option","onClose",function(G,E){var F=C.data().oldDatePickerHandler;if(F){F.apply(C[0],[G,E]);}C.trigger("time");});}C.data().timePicked=true;});};})(jQuery);
